;THE FUNCTIONALITY OF THIS CODE IS DRAWING THE CAR


PUBLIC CAR1
PUBLIC CAR2
EXTRN HEIGHT1:WORD
EXTRN WIDTH1:WORD
EXTRN IMG1:BYTE
EXTRN CENTER1:WORD
EXTRN STATE1:BYTE
EXTRN HEIGHT2:WORD
EXTRN WIDTH2:WORD
EXTRN IMG2:BYTE
EXTRN CENTER2:WORD
EXTRN STATE2:BYTE
EXTRN TOP1:WORD
EXTRN TOP2:WORD
.MODEL SMALL
.STACK 64
.CODE

CAR1 PROC FAR

CMP STATE1 , 0      
JNZ RIGHT

MOV TOP1,BX

PUSH BX

MOV AX,BX
MOV DX,HEIGHT1  
MOV SI,OFFSET IMG1

UPROW:
MOV DI,AX
MOV CX,WIDTH1


LOOP1:
MOV AL,[SI]
STOSB
INC SI
LOOP LOOP1

POP AX
ADD AX,320      ; MOVE TO THE NEXT ROW
PUSH AX
DEC DX          
CMP DX , 0
JNZ UPROW
POP AX
JMP EXIT



RIGHT:
CMP STATE1 , 1
JNZ LEFT
MOV TOP1,BX

PUSH BX

MOV AX,BX

MOV DX,HEIGHT1
MOV SI,OFFSET IMG1


RIGHTCOLUMN:
MOV DI,AX
MOV CX,WIDTH1

LOOP2:
MOV AL,[SI]
PUSH DI
STOSB
POP DI
INC SI
ADD DI,320
LOOP LOOP2
POP AX
SUB AX,1
PUSH AX
DEC DX
CMP DX , 0
JNZ RIGHTCOLUMN
POP AX
JMP EXIT



LEFT:
CMP STATE1,2
JNZ DOWN

MOV BX,TOP1
PUSH BX


MOV AX,BX
MOV DX,HEIGHT1
MOV SI,OFFSET IMG1


LEFTCOLUMN:
MOV DI,AX
MOV CX,WIDTH1

LOOP3: 
MOV AL,[SI]
PUSH DI
STOSB
POP DI
INC SI
SUB DI,320
LOOP LOOP3
POP AX
ADD AX,1
PUSH AX
DEC DX
CMP DX , 0
JNZ LEFTCOLUMN
POP AX
JMP EXIT



DOWN:
MOV BX,TOP1
PUSH BX

MOV AX,BX
MOV DX,HEIGHT1
MOV SI,OFFSET IMG1


DOWNROW:
MOV DI,AX
MOV CX,WIDTH1

LOOP4:
MOV AL,[SI]
STOSB
SUB DI,2
INC SI
LOOP LOOP4
POP AX
SUB AX,320
PUSH AX
DEC DX
CMP DX , 0
JNZ DOWNROW
POP AX
EXIT:
RET

CAR1 ENDP

CAR2 PROC FAR

CMP STATE2 , 0      
JNZ RIGHT2
MOV BX,TOP2
PUSH BX

MOV AX,BX
MOV DX,HEIGHT2  
MOV SI,OFFSET IMG2


UPROW2:
MOV DI,AX
MOV CX,WIDTH2

LOOP21:
MOV AL,[SI]
STOSB
INC SI
LOOP LOOP21

POP AX
ADD AX,320      ; MOVE TO THE NEXT ROW
PUSH AX
DEC DX          
CMP DX , 0
JNZ UPROW2
POP AX
JMP EXIT2



RIGHT2:
CMP STATE2 , 1
JNZ LEFT2
MOV BX,TOP2
PUSH BX

MOV AX,BX

MOV DX,HEIGHT2
MOV SI,OFFSET IMG2


RIGHTCOLUMN2:
MOV DI,AX
MOV CX,WIDTH2

LOOP22:

MOV AL,[SI]
PUSH DI
STOSB
POP DI
INC SI
ADD DI,320
LOOP LOOP22
POP AX
SUB AX,1
PUSH AX
DEC DX
CMP DX , 0
JNZ RIGHTCOLUMN2
POP AX
JMP EXIT2



LEFT2:
CMP STATE2,2
JNZ DOWN2

MOV BX,TOP2
PUSH BX


MOV AX,BX
MOV DX,HEIGHT2
MOV SI,OFFSET IMG2


LEFTCOLUMN2:
MOV DI,AX
MOV CX,WIDTH2

LOOP23: 
MOV AL,[SI]
PUSH DI
STOSB
POP DI
INC SI
SUB DI,320
LOOP LOOP23
POP AX
ADD AX,1
PUSH AX
DEC DX
CMP DX , 0
JNZ LEFTCOLUMN2
POP AX
JMP EXIT2



DOWN2:
MOV BX,TOP2
PUSH BX

MOV AX,BX
MOV DX,HEIGHT2
MOV SI,OFFSET IMG2


DOWNROW2:
MOV DI,AX
MOV CX,WIDTH2

LOOP24:
MOV AL,[SI]
STOSB
SUB DI,2
INC SI
LOOP LOOP24
POP AX
SUB AX,320
PUSH AX
DEC DX
CMP DX , 0
JNZ DOWNROW2
POP AX
EXIT2:

RET
CAR2 ENDP
END
