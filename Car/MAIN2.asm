PUBLIC WIDTH1
PUBLIC WIDTH2
PUBLIC HEIGHT1
PUBLIC HEIGHT2
PUBLIC CENTER1
PUBLIC CENTER2
PUBLIC STATE1
PUBLIC STATE2
PUBLIC IMG1
PUBLIC IMG2
PUBLIC PIXELS1
PUBLIC PIXELS2
EXTRN CAR1:FAR
EXTRN CAR2:FAR
EXTRN RESETCAR1:FAR
EXTRN RESETCAR2:FAR
EXTRN ORIG1:FAR
EXTRN ORIG2:FAR
.MODEL SMALL
.STACK 64
.DATA
INCLUDE IMAGE1.INC
INCLUDE IMAGE2.INC
WIDTH1 DW 7
HEIGHT1 DW 17
WIDTH2 DW 7
HEIGHT2 DW 15
CENTER1 DW 60000
CENTER2 DW 38500
STATE1 DB 0                  ; 0 => UP    1 => RIGHT  2=> LEFT  3=>DOWN
STATE2 DB 0                  ; 0 => UP    1 => RIGHT  2=> LEFT  3=>DOWN
PIXELS1 DB 119 DUP (?)
PIXELS2 DB 105 DUP(?)
DB 0
.CODE
MAIN PROC FAR
MOV AX ,@DATA
MOV DS,AX

MOV AX,0A000H
MOV ES,AX

;GRAPHICS MODE
MOV AH,0H
MOV AL,13H
INT 10H

CALL FAR PTR ORIG1
CALL FAR PTR CAR1
CALL FAR PTR ORIG2
CALL FAR PTR CAR2
AGAIN:
CHECK: mov ah,1
int 16h
jz CHECK
mov ah,0
int 16h


CMP AH,48H
JNZ RIGHT1 
CALL FAR PTR RESETCAR1
MOV DL,0
MOV STATE1,DL
SUB CENTER1,320
CALL FAR PTR ORIG1
CALL FAR PTR CAR1
JMP AGAIN

RIGHT1:
CMP AH,4DH
JNZ LEFT1 
CALL FAR PTR RESETCAR1
MOV DL , 1
MOV STATE1 ,DL
ADD CENTER1,1
CALL FAR PTR ORIG1
CALL FAR PTR CAR1
JMP AGAIN

LEFT1: 
CMP AH,4BH
JNZ DOWN1
CALL FAR PTR RESETCAR1
MOV DL,2
MOV STATE1,DL
SUB CENTER1,1
CALL FAR PTR ORIG1
CALL FAR PTR CAR1
JMP AGAIN

DOWN1:
CMP AH,50H
JNZ UP2
CALL FAR PTR RESETCAR1
MOV DL,3
MOV STATE1,DL
ADD CENTER1,320
CALL FAR PTR ORIG1
CALL FAR PTR CAR1
AGAIN2:JMP AGAIN

UP2:
CMP AH,11H
JNZ RIGHT2
CALL FAR PTR RESETCAR2
MOV DL,0
MOV STATE2,DL
SUB CENTER2,320
CALL FAR PTR ORIG2
CALL FAR PTR CAR2
JMP AGAIN2


RIGHT2:
CMP AH,20H
JNZ LEFT2
CALL FAR PTR RESETCAR2
MOV DL , 1
MOV STATE2 ,DL
ADD CENTER2,1
CALL FAR PTR ORIG2
CALL FAR PTR CAR2
JMP AGAIN2


LEFT2:
CMP AH,1EH
JNZ DOWN2
CALL FAR PTR RESETCAR2
MOV DL,2
MOV STATE2,DL
SUB CENTER2,1
CALL FAR PTR ORIG2
CALL FAR PTR CAR2
JMP AGAIN2

DOWN2:
CMP AH,1FH
JNZ AGAIN2
CALL FAR PTR RESETCAR2
MOV DL,3
MOV STATE2,DL
ADD CENTER2,320
CALL FAR PTR ORIG2
CALL FAR PTR CAR2

JMP AGAIN2



MOV AH,0
INT 16H
MOV AH,4CH
INT 21H
MAIN ENDP
END MAIN